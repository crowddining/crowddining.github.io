angular.module("crowddining",["ngAnimate","ngRoute"]).config(["$locationProvider","$routeProvider",function(a,b){b.otherwise({redirectTo:"/"})}]),angular.module("crowddining").controller("MainCtrl",["$scope","$location","$anchorScroll","ParseService","Meals",function(a,b,c,d,e){var f=new Date;a.simpleMail={},a.hosting={},a.meals=e.list(),a.numberMeals=0,a.meals.filter(function(a){return a.when.getTime()<=f.getTime()}).forEach(function(b){a.numberMeals+=b.seats}),a.onload=function(){console.log("img loaded")},a.activeClass={all:"active",karlsruhe:"",mannheim:""},a.active={},a.future=function(a){return a.when.getTime()>=f.getTime()},a.past=function(a){return a.when.getTime()<=f.getTime()},a.karlsruhe=function(){$("#work-preview").mixitup("filter","karlsruhe"),b.hash("angebote"),c()},a.mannheim=function(){$("#work-preview").mixitup("filter","mannheim"),b.hash("angebote"),c()},a.angebote=function(){b.hash("angebote"),c()},a.postMail=function(b){d.saveMail(b).then(function(){a.simpleMail.success=!0,a.$apply()},function(){a.simpleMail.error=!0,a.$apply()})},a.anrufen=function(){b.hash("anrufen"),c()},a.postHosting=function(e){d.saveHosting(e).then(function(){a.hosting.success=!0,a.$apply(),b.hash("yeah"),c()},function(){a.hosting.error=!0,a.$apply()})},a.toggleFilter=function(b){if(0===Object.keys(a.active).length){if("all"===b)return;a.active={city:b},a.activeClass.all="",a.activeClass[b]="active"}else{if(a.active===b.toLowerCase())return;a.activeClass[a.active.city]="",a.activeClass[b]="active",a.active="all"===b?{}:{city:b}}}}]),angular.module("crowddining").service("ParseService",function(){Parse.initialize("LR0pYmBqkigaSooksX77MdfebKtBQ3aTEGr5mymj","FfkeGXU0SEhsUhRcmS9aYNPhlTUi3MeqKkcdDgCN");var a=Parse.Object.extend("SimpleEmail"),b=new a,c=Parse.Object.extend("Hosting"),d=new c;this.saveMail=function(a){return b.save({email:a})},this.saveHosting=function(a){return d.save(a)}}),angular.module("crowddining").service("Meals",function(){function a(a){var b="DD MMM YY | HH:mm",c=" | HH:mm",d=new Date;return a=moment(a).dayOfYear()==moment(d).dayOfYear()-1?"Gestern "+moment(a).format(c):moment(a).dayOfYear()==moment(d).dayOfYear()?"Heute "+moment(a).format(c):moment(a).dayOfYear()==moment(d).dayOfYear()+1?"Morgen "+moment(a).format(c):moment(a).format(b)}var b="Hey, ich bin Tim und einer der Gründer von crowddining. Neben meinem Informatik Studium am KIT koche ich wahnsinnig gerne. Komm einfach mal vorbei, du bist immer eingeladen!",c={description:b,chef:"Tim",profileLink:"https://www.facebook.com/tim.suchanek.5",seats:4,where:"Südstadt Karlsruhe",number:"01717842219",price:3,city:"Karlsruhe",mapLink:"https://www.google.de/maps/place/Rankestraße+2/@48.9995615,8.4114402,17z/data=!3m1!4b1!4m2!3m1!1s0x4797063e4f047a29:0x745d847a54c9d3b7"},d=[angular.extend(angular.copy(c),{title:"Tapas!!",description:"Nachdem wir heute die Algo Klausur geschrieben haben, gibts eine leckere Belohnung! Tapas!",img:"Tapas.jpg",when:new Date(2014,1,24,20,30),seats:12}),{chef:"Daniel",profileLink:"https://www.facebook.com/daniel.james.seiler?fref=ts",seats:5,price:5,where:"Süd-Weststadt",city:"Karlsruhe",number:"01639782558",description:"Zutaten gerade frisch eingekauft mit naturtrübem apfelsaft vom Schwarzwaldhof",title:"Bärlauchsuppe",img:"Baerlauchsuppe.jpg",when:new Date(2014,2,10,20,0),mapLink:"https://www.google.com/maps/place/Karlstra%C3%9Fe+66/@49.0022335,8.394158,17z/data=!3m1!4b1!4m2!3m1!1s0x4797065cdd45b5df:0x9354cf66f1f0caca"},{chef:"Daniel",profileLink:"https://www.facebook.com/daniel.james.seiler?fref=ts",seats:5,price:5,where:"Karlsruhe Mitte-West",city:"Karlsruhe",number:"01639782558",description:"Heute mal: Klassisch – Burger Selbstverständlich selbstgemacht aus 100% Rindfleisch mit besten Zutaten",title:"Hamburger",img:"Hamburger.jpg",when:new Date(2014,2,8,17,30),mapLink:"https://www.google.com/maps/place/Passagehof+22/@49.0108907,8.3971975,17z/data=!3m1!4b1!4m2!3m1!1s0x479706503a6eb315:0xfb03b9a57000d1aa"},{chef:"Mateo",profileLink:"https://www.facebook.com/mateo.freudenthal",seats:8,where:"Weststadt Karlsruhe",number:"015253128195",price:8,city:"Karlsruhe",mapLink:"https://www.google.com/maps/place/Hirschstra%C3%9Fe+41/@49.0060492,8.391491,17z/data=!3m1!4b1!4m2!3m1!1s0x4797065bc45d570f:0x5e77e04ddc32726a",description:"Hola! Wenn ihr Lust auf ein bolivianisches Nationalgericht habt dann schaut bei mir vorbei! Ich mache eine typische Suppe (Chairo). Ich habe original Zutaten wie Chunho(schwarze Kartoffel), Tunta(graue Kartoffel) und Gewürzen da. Genau so wie leckeren Coca-Tee und passenden Wein.",title:"Bolivianisches Nationalgericht: Chairo + Fricase de Pollo",img:"Huehner Frikassee.jpg",when:new Date(2014,2,30,20,0)},{chef:"Daniel",profileLink:"https://www.facebook.com/daniel.james.seiler?fref=ts",seats:3,price:3,where:"Süd-Weststadt Karlsruhe",city:"Karlsruhe",number:"01639782558",description:"Schweinefilet mit Salat, Baguette und Kartoffeln oder Nudeln.In der K66 WG << best place to dine – ever",title:"Schweinefilet",img:"Schweinenackensteak mit Rosmarinkartoffeln und Pilzen.jpg",when:new Date(2014,1,21,20,0)},{chef:"Sebastian",profileLink:"https://www.facebook.com/sebastianwenzel.net",seats:20,where:"Zentrum Karlsruhe",number:"016099444565",price:4,city:"Karlsruhe",mapLink:"https://www.google.com/maps/place/49%C2%B000'27.4%22N+8%C2%B024'34.6%22E/@49.0075991,8.4096166,15z/data=!3m1!4b1!4m2!3m1!1s0x0:0x0",description:"Am Mittwoch haben wir schon für 10 Leute mit dem Pizzastein gebacken. Samstag gehts weiter! Bitte vorher bescheid sagen, welche Pizza ihr gerne möchtet! Sonderwünsche sind willkommen!",title:"Pizza nach Wahl vom Pizzastein",img:"Schinkenpizza.jpg",when:new Date(2014,1,22,20,0)},angular.extend(angular.copy(c),{title:"Gemüse-Hack Pfanne mit Reis",img:"Gemuese-Hack Pfanne mit Reis.jpg",when:new Date(2014,1,18,20,0)}),angular.extend(angular.copy(c),{seats:10,title:"Pizza vom Pizzastein",img:"Selbstgemachte Schinkenpizza.jpg",when:new Date(2014,1,19,20,0)}),angular.extend(angular.copy(c),{title:"Rote Linsensuppe mit Hähnchenspiessen",img:"Rote Linsen Suppe.jpg",when:new Date(2014,1,20,20,0)}),angular.extend(angular.copy(c),{title:"Bulgur Salat",img:"Bulgursalat.jpg",when:new Date(2014,1,21,20,0)}),angular.extend(angular.copy(c),{title:"Auberginen Auflauf",img:"Auberginen Auflauf.jpg",when:new Date(2014,1,22,20,0)}),angular.extend(angular.copy(c),{title:"Couscous-Mango Salat",img:"Couscous Mango Salat.jpg",when:new Date(2014,1,23,20,0)})];this.list=function(){return d.map(function(b){return b.img="/images/meals/"+b.img,b.formattedWhen=a(b.when),b.city=b.city.toLowerCase(),b})}}),angular.module("crowddining").directive("focusMe",function(){return{scope:{trigger:"=focusMe"},link:function(a,b){a.$watch("trigger",function(c){c===!0&&(b[0].focus(),a.trigger=!1)})}}});