angular.module("crowddining",["ngAnimate","ngRoute"]).config(["$locationProvider","$routeProvider",function(a,b){b.otherwise({redirectTo:"/"})}]),angular.module("crowddining").controller("MainCtrl",["$scope","$location","$anchorScroll","ParseService","Meals",function(a,b,c,d,e){a.simpleMail={},a.hosting={},a.meals=e.list(),a.activeClass={all:"active",karlsruhe:"",mannheim:""},a.active={},a.karlsruhe=function(){$("#work-preview").mixitup("filter","karlsruhe"),b.hash("angebote"),c()},a.mannheim=function(){$("#work-preview").mixitup("filter","mannheim"),b.hash("angebote"),c()},a.angebote=function(){b.hash("angebote"),c()},a.postMail=function(b){d.saveMail(b).then(function(){a.simpleMail.success=!0,a.$apply()},function(){a.simpleMail.error=!0,a.$apply()})},a.anrufen=function(){b.hash("anrufen"),c()},a.postHosting=function(e){d.saveHosting(e).then(function(){a.hosting.success=!0,a.$apply(),b.hash("yeah"),c()},function(){a.hosting.error=!0,a.$apply()})},a.toggleFilter=function(b){if(0===Object.keys(a.active).length){if("all"===b)return;a.active={city:b},a.activeClass.all="",a.activeClass[b]="active"}else{if(a.active===b.toLowerCase())return;a.activeClass[a.active.city]="",a.activeClass[b]="active",a.active="all"===b?{}:{city:b}}}}]),angular.module("crowddining").service("ParseService",function(){Parse.initialize("LR0pYmBqkigaSooksX77MdfebKtBQ3aTEGr5mymj","FfkeGXU0SEhsUhRcmS9aYNPhlTUi3MeqKkcdDgCN");var a=Parse.Object.extend("SimpleEmail"),b=new a,c=Parse.Object.extend("Hosting"),d=new c;this.saveMail=function(a){return b.save({email:a})},this.saveHosting=function(a){return d.save(a)}}),angular.module("crowddining").service("Meals",function(){function a(a){var b="DD MMM YY | HH:mm",c=" | HH:mm",d=new Date;return a=moment(a).dayOfYear()==moment(d).dayOfYear()-1?"Gestern "+moment(a).format(c):moment(a).dayOfYear()==moment(d).dayOfYear()?"Heute "+moment(a).format(c):moment(a).dayOfYear()==moment(d).dayOfYear()+1?"Morgen "+moment(a).format(c):moment(a).format(b)}var b="Hey, ich bin Tim und einer der Gründer von crowddining. Neben meinem Informatik Studium am KIT koche ich wahnsinnig gerne. Komm einfach mal vorbei, du bist immer eingeladen!",c={description:b,chef:"Tim",profileLink:"https://www.facebook.com/tim.suchanek.5",seats:4,where:"Südstadt Karlsruhe",number:"01717842219",price:3,city:"Karlsruhe",mapLink:"https://www.google.de/maps/place/Rankestraße+2/@48.9995615,8.4114402,17z/data=!3m1!4b1!4m2!3m1!1s0x4797063e4f047a29:0x745d847a54c9d3b7"},d=[angular.extend(angular.copy(c),{title:"Gemüse-Hack Pfanne mit Reis",img:"Gemuese-Hack Pfanne mit Reis.jpg",when:new Date(2014,1,18,20,0)}),angular.extend(angular.copy(c),{title:"Pizza vom Pizzastein",img:"Selbstgemachte Schinkenpizza.jpg",when:new Date(2014,1,19,20,0)}),angular.extend(angular.copy(c),{title:"Rote Linsensuppe mit Hähnchenspiessen",img:"Rote Linsen Suppe.jpg",when:new Date(2014,1,20,20,0)}),angular.extend(angular.copy(c),{title:"Bulgur Salat",img:"Bulgursalat.jpg",when:new Date(2014,1,21,20,0)}),angular.extend(angular.copy(c),{title:"Auberginen Auflauf",img:"Auberginen Auflauf.jpg",when:new Date(2014,1,22,20,0)}),angular.extend(angular.copy(c),{title:"Couscous-Mango Salat",img:"Couscous Mango Salat.jpg",when:new Date(2014,1,23,20,0)})];this.list=function(){return d.map(function(b){return b.img="/images/meals/"+b.img,b.when=a(b.when),b.city=b.city.toLowerCase(),b})}});